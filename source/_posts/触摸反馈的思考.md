---
title: 触摸反馈的思考
date: 2020-11-09 16:59:45
tags:
---

  触摸反馈的思考
<!-- more -->

# 重新思考触摸反馈

我这里只讨论单点触摸的情况

对于触摸反馈来说 最重要的阶段是 DOWN  和 MOVE

这是两个时间段

- DOWN  会去找事件处理负责人
- MOVE  就是要将x轴或y轴的偏移量 转换成 我们看到的各种UI效果

核心方法 就是容器类ViewGroup的dispatchTouchEvent 和 非容器类View的OnTouchEvent

- dispatchTouchEvent  会执行多次 在不同的事件序列阶段 有不同的任务 并且事件序列之间是不会重合的 每个阶段就完成自己阶段的任务 不要搞混
- 在DOWN 这个时间段 获取for循环问各个子View是否需要处理这个事件
- 在MOVE  这个时间段 不会有for循环询问

    所以在MOVE的时候 父view可以有一次机会拦截 但是拦截过后 就不能再分发出去了 (在MOVE的时候 子view 可以将所有权归还给父view  但是一旦归还 父view就不能再分发下去了  因为在MOVE阶段并没有for循环操作去询问谁处理  这也就是为什么引入嵌套滑动接口的原因 )

触摸反馈就像是一个巨大的函数  系统给你用户的手势输入  你根据自己的算法 把这些输入转换成各种酷炫的U交互